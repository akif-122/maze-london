<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!-- OWL CAROUSEL  -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css" />


    <!-- FONTAWESOME ICON  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <!-- BOOTSTRAP CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.3/css/bootstrap.min.css" />

    <!-- CUSTOM CSS -->
    <link rel="stylesheet" href="assets/css/style.css">



</head>

<body>

    <div class="wrapper">

        <!-- HEADER SECTION START -->
        <header class="header position-fixed top-0 w-100" style="z-index: 1000 ;">
            <nav class="navbar navbar-expand-lg ">
                <div class="container">
                    <a href="#">
                        <img src="assets/imgs/logo.jpg" width="100" alt="">
                    </a>

                    <div class="collapse navbar-collapse" id="topNav">
                        <ul class="navbar-nav mx-auto">
                            <li><a href="index.html">Home</a></li>
                            <li><a href="#">About</a></li>
                            <li><a href="basket.html">Basket</a></li>
                            <li><a href="#">Social</a></li>
                        </ul>
                    </div>

                    <div class="right-link d-flex align-items-center gap-3">
                        <a href="basket.html" class="basket">
                            <i class="fa-solid fa-cart-shopping"></i> Basket <span id="cart-item"
                                class="bg-danger p-2 rounded-full">0</span>
                        </a>
                        <!-- <a href="#">
                            <i class="fa-solid fa-user"></i> Profile
                        </a> -->
                    </div>
                    <button class="navbar-toggler" data-bs-target="#topNav" data-bs-toggle="collapse">
                        <span class="navbar-toggler-icon"></span>
                    </button>


                </div>
            </nav>
        </header>
        <!-- HEADER SECTION END -->

        <!-- HERO SECTION START -->
        <section class="hero-section header-slide owl-carousel owl-theme">

            <div class="hero-content container">
                <div class="hero-img">
                    <img src="assets/imgs/t-shirt-1.png" alt="">
                </div>
                <div class="hero-text">
                    <h1 class="text-uppercase text-center">Get Start <br /> your favourite shopping.</h1>
                </div>
            </div>

            <div class="hero-content container">
                <div class="hero-img">
                    <img src="assets/imgs/t-shirt-2.png" alt="">
                </div>
                <div class="hero-text">
                    <h1 class="text-uppercase text-center">Get Start <br /> your favourite shopping.</h1>
                </div>
            </div>

            <div class="hero-content container">
                <div class="hero-img">
                    <img src="assets/imgs/t-shirt-3.png" alt="">
                </div>
                <div class="hero-text">
                    <h1 class="text-uppercase text-center">Get Start <br /> your favourite shopping.</h1>
                </div>
            </div>


        </section>
        <!-- HERO SECTION END -->

        <!-- PRODUCT SECTION START -->
        <section class="products">
            <div class="container">
                <h4>Latest Products</h4>

                <div class="row" id="product-list">


                </div>

            </div>
        </section>
        <!-- PRODUCT SECTION END -->




    </div>



    <!-- JQUERY  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <!-- OWL CAROUSEL -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>

    <!-- AOS ANIMATION -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>

    <!-- BOOTSTRAP JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.3/js/bootstrap.bundle.min.js"></script>

    <script>


        // header slider
        $(document).ready(function () {
            $('.header-slide').owlCarousel({
                loop: true,
                dots: false,
                nav: true,
                slideSpeed: 500,
                autoplaySpeed: 1000,
                autoplay: true,
                autoplayTimeout: 3000,
                // autoplayHoverPause:true,
                items: 1,
                responsiveClass: true,

                responsive: {
                    0: {
                        items: 1
                        // nav:true
                    },
                    600: {
                        items: 1,
                    },
                    1000: {
                        items: 1,
                        // loop:false
                    }
                }
            });


        });

        // API CALL
        let apiUrl = "https://fakestoreapi.com/products";
        let main = document.getElementById("product-list");


        // BASKET COUNT
        const basketCount = (items) => {
            let basketCount = document.getElementById("cart-item");
            basketCount.innerHTML = items;
        }

        // CART ITEMS
        const items = JSON.parse(localStorage.getItem("cart"));
        basketCount(items.length);


        const addDataToHtml = (product) => {
            let div = document.createElement("div", null);
            div.className = "col-md-3 px-2 mb-4";
            div.innerHTML = `<div div class="product h-100" >
                            <div class="product-img">
                                <img src=${product.image} width="100%" alt="">
                            </div>
                            <div class="product-text">
                                <h5><a href="#">${product.title}</a> </h5>
                                <p>$${product.price}</p>
                                <button class="add-cart"  >Add to Cart</button>
                            </div>
                        </div >`

            main.appendChild(div)

            div.addEventListener("click", (e) => {


                if (e.target.className == "add-cart") {
                    addToCart(product)
                }
            })

        }



        let cartItem = JSON.parse(localStorage.getItem("cart"));
        const cart = localStorage.setItem("cart", JSON.stringify(cartItem))
        // console.log(cartItem.length);
        const addToCart = (product) => {
            let isInCart = cartItem.findIndex((value) => value.id == product.id);

            if (cartItem.length <= 0) {

                cartItem = [{ ...product, qty: 1 }];
            } else if (isInCart < 0) {
                cartItem.push({ ...product, qty: 1 });
            } else {
                cartItem[isInCart].qty = cartItem[isInCart].qty + 1;
            }


            localStorage.setItem("cart", JSON.stringify(cartItem));
            let iteCount = JSON.parse(localStorage.getItem("cart"));

            basketCount(iteCount.length)

        }


        const getData = async () => {
            try {

                const res = await fetch(apiUrl);
                const data = await res.json();
                console.log(data)




                data.forEach((item) => {

                    addDataToHtml(item);



                })





            } catch (error) {
                console.log(error)
            }
        }

        getData()


    </script>

</body>

</html>